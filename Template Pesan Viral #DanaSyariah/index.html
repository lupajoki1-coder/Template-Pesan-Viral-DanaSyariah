<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Template Pesan Viral #SaveLenderDSI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Font Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<script>
  window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
</script>
<script defer src="/_vercel/insights/script.js"></script>    
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            touch-action: manipulation; 
            -webkit-tap-highlight-color: transparent; 
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .smooth-scroll-touch { -webkit-overflow-scrolling: touch; }
        .glass-effect { bg-white/90; backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); }
        .target-pill { 
            cursor: pointer; 
            transition: all 0.2s;
        }
        .target-pill.selected {
            transform: scale(1.05);
        }
        /* Neon text effect for countdown */
        .neon-text {
            text-shadow: 0 0 5px rgba(34, 211, 238, 0.6);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: { 'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite' },
                    boxShadow: { 'glow': '0 0 20px -5px rgba(255, 0, 0, 0.3)' }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen bg-[#F8FAFC] text-slate-900 pb-40 selection:bg-blue-100/50 overflow-x-hidden" oncontextmenu="return false;">

    <!-- BACKGROUND AMBIENCE -->
    <div class="fixed inset-0 pointer-events-none overflow-hidden z-0">
        <div class="absolute top-[-20%] left-[-20%] w-[70%] h-[70%] bg-blue-100/40 blur-[100px] rounded-full mix-blend-multiply"></div>
        <div class="absolute bottom-[-20%] right-[-20%] w-[70%] h-[70%] bg-red-100/40 blur-[100px] rounded-full mix-blend-multiply"></div>
    </div>

    <!-- HEADER -->
    <header class="pt-6 pb-4 px-4 relative z-20 bg-white/80 backdrop-blur-xl sticky top-0 border-b border-slate-200/80 supports-[backdrop-filter]:bg-white/60">
        <!-- Flex container modified for mobile responsiveness (flex-col on mobile, flex-row on sm/tablet up) -->
        <div class="max-w-3xl mx-auto flex flex-col sm:flex-row items-center sm:items-start justify-between gap-4 sm:gap-0">
            
            <!-- Left Side: Title & Logo -->
            <div class="flex items-center space-x-3 w-full sm:w-auto justify-center sm:justify-start">
                <div class="relative">
                    <div class="absolute inset-0 bg-red-600 blur-md opacity-20 rounded-xl animate-pulse-slow"></div>
                    <div class="bg-gradient-to-br from-red-600 to-red-700 p-2.5 rounded-xl shadow-lg relative">
                        <i data-lucide="megaphone" class="w-5 h-5 text-white"></i>
                    </div>
                </div>
                <div class="text-left">
                    <h1 class="text-xl font-black tracking-tight text-slate-900 leading-none">
                        SUARA KORBAN
                    </h1>
                    <div class="flex items-center space-x-2 mt-1">
                        <span class="px-1.5 py-0.5 bg-red-100 text-red-700 rounded text-[10px] font-bold tracking-wider uppercase">#SaveLenderDSI</span>
                        <span class="w-1 h-1 bg-slate-300 rounded-full"></span>
                         <span class="text-[11px] font-medium text-slate-500" id="refresh-indicator">Kondisi Darurat</span>
                    </div>
                </div>
            </div>

            <!-- Right Side: Loss Info & FUTURISTIC MINI COUNTDOWN -->
            <div class="text-center sm:text-right flex flex-col items-center sm:items-end w-full sm:w-auto">
                <!-- Total Kerugian -->
                <div class="mb-2 w-full flex flex-col items-center sm:items-end">
                    <div class="text-[10px] text-slate-500 font-bold uppercase tracking-wider mb-0.5">Total Kerugian</div>
                    <div class="text-2xl font-black text-slate-800 leading-none flex items-center" title="Melampaui Rp 1 Triliun, dan Terus Melambung Tak Terkendali">
                        <span class="text-red-600 mr-1">Rp</span>Melebihi 1T<span class="text-red-600">+</span>
                    </div>
                </div>

                <!-- MINI COUNTDOWN (FUTURISTIC STYLE - RESPONSIVE) -->
                <div class="relative group cursor-default max-w-full" title="Target: 18 November 2026">
                    <!-- Glow Effect Behind -->
                    <div class="absolute -inset-0.5 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-lg blur opacity-30 group-hover:opacity-60 transition duration-500"></div>
                    
                    <!-- Container: Lighter Background (slate-800) -->
                    <div class="relative flex items-center gap-3 bg-slate-800 ring-1 ring-white/20 rounded-lg px-3 py-2 shadow-lg justify-center sm:justify-start mx-auto sm:mx-0">
                        
                        <!-- Label with Date Info -->
                        <div class="text-[9px] font-bold text-slate-400 uppercase leading-tight text-right border-r border-slate-600 pr-2.5 mr-0.5">
                            <span class="text-slate-300 block sm:inline">Menuju Target</span>
                            <span class="text-blue-400 font-black tracking-wide whitespace-nowrap">18 Nov '26</span>
                        </div>
                        
                        <!-- Digital Digits -->
                        <div class="flex items-baseline gap-1.5 font-mono text-[13px] font-bold text-cyan-300 neon-text tracking-tight">
                            <div class="text-center">
                                <span id="cd-days" class="tabular-nums">000</span><span class="text-[8px] text-slate-400 ml-0.5 font-sans font-semibold">H</span>
                            </div>
                            <span class="text-slate-500 text-[10px] animate-pulse mb-1">:</span>
                            <div class="text-center">
                                <span id="cd-hours" class="tabular-nums">00</span><span class="text-[8px] text-slate-400 ml-0.5 font-sans font-semibold">J</span>
                            </div>
                            <span class="text-slate-500 text-[10px] animate-pulse mb-1">:</span>
                            <div class="text-center">
                                <span id="cd-minutes" class="tabular-nums">00</span><span class="text-[8px] text-slate-400 ml-0.5 font-sans font-semibold">M</span>
                            </div>
                            <span class="text-slate-500 text-[10px] animate-pulse mb-1">:</span>
                            <div class="text-center">
                                <span id="cd-seconds" class="tabular-nums text-red-400">00</span><span class="text-[8px] text-slate-400 ml-0.5 font-sans font-semibold">D</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-3xl mx-auto px-4 space-y-5 pt-5 relative z-10">

        <!-- QUICK ACTIONS (2x2 GRID) -->
        <div class="bg-white rounded-2xl p-1.5 border border-slate-200 shadow-sm grid grid-cols-2 gap-1.5">
             <button onclick="copyTargets('full')" class="relative group overflow-hidden bg-slate-50 hover:bg-blue-50 border border-slate-100 hover:border-blue-200 rounded-xl p-3 transition-all active:scale-[0.98]">
                <div class="flex items-center space-x-3 relative z-10">
                    <div class="bg-white p-2 rounded-full shadow-sm border border-slate-100 group-hover:border-blue-200 transition-colors">
                        <i data-lucide="crosshair" class="w-4 h-4 text-blue-600"></i>
                    </div>
                    <div class="text-left overflow-hidden">
                        <div class="font-bold text-xs text-slate-900 truncate">MENTION LENGKAP</div>
                        <div class="text-[10px] font-medium text-slate-500" id="target-count">... Akun</div>
                    </div>
                </div>
            </button>
            <button onclick="copyHashtags('full')" class="relative group overflow-hidden bg-slate-50 hover:bg-amber-50 border border-slate-100 hover:border-amber-200 rounded-xl p-3 transition-all active:scale-[0.98]">
                <div class="flex items-center space-x-3 relative z-10">
                    <div class="bg-white p-2 rounded-full shadow-sm border border-slate-100 group-hover:border-amber-200 transition-colors">
                        <i data-lucide="hash" class="w-4 h-4 text-amber-600"></i>
                    </div>
                    <div class="text-left overflow-hidden">
                        <div class="font-bold text-xs text-slate-900 truncate">TAGAR LENGKAP</div>
                        <div class="text-[10px] font-medium text-slate-500" id="hashtag-count">... Tagar</div>
                    </div>
                </div>
            </button>
             <button onclick="copyTargets('wajib')" class="relative group overflow-hidden bg-slate-50 hover:bg-red-50 border border-slate-100 hover:border-red-200 rounded-xl p-3 transition-all active:scale-[0.98]">
                <div class="flex items-center space-x-3 relative z-10">
                    <div class="bg-white p-2 rounded-full shadow-sm border border-slate-100 group-hover:border-red-200 transition-colors">
                        <i data-lucide="at-sign" class="w-4 h-4 text-red-600"></i>
                    </div>
                    <div class="text-left overflow-hidden">
                        <div class="font-bold text-xs text-slate-900 truncate">MENTION WAJIB</div>
                        <div class="text-[10px] font-medium text-slate-500" id="mention-wajib-count">... Akun</div>
                    </div>
                </div>
            </button>
             <button onclick="copyHashtags('utama')" class="relative group overflow-hidden bg-slate-50 hover:bg-green-50 border border-slate-100 hover:border-green-200 rounded-xl p-3 transition-all active:scale-[0.98]">
                <div class="flex items-center space-x-3 relative z-10">
                    <div class="bg-white p-2 rounded-full shadow-sm border border-slate-100 group-hover:border-green-200 transition-colors">
                        <i data-lucide="star" class="w-4 h-4 text-green-600"></i>
                    </div>
                    <div class="text-left overflow-hidden">
                        <div class="font-bold text-xs text-slate-900 truncate">TAGAR UTAMA</div>
                        <div class="text-[10px] font-medium text-slate-500" id="hashtag-utama-count">... Tagar</div>
                    </div>
                </div>
            </button>
        </div>

        <!-- MANUAL TARGET SELECTOR -->
        <section class="bg-white rounded-2xl p-4 border border-slate-200 shadow-sm space-y-4">
            <h2 class="text-sm font-black text-slate-900 flex items-center mb-2">
                <i data-lucide="list-checks" class="w-4 h-4 mr-2 text-blue-600"></i> PILIH TARGET MANUAL (Anti-Spam Strategy)
            </h2>
            <p class="text-[11px] text-slate-500 mb-4">Pilih kombinasi target secara manual agar komentar Anda tidak terdeteksi *bot/spam*. Jumlah yang direkomendasikan: 5-10 Mention dan 5-10 Tagar.</p>

            <!-- MENTION CATEGORY SELECTOR -->
            <div class="space-y-3" id="mention-selector-container">
                <div class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Pilih Kategori Mention (Akun)</div>
                <div class="flex flex-wrap gap-2" id="mention-category-pills"></div>
                <!-- Selected Mentions -->
                <div class="mt-2 p-3 bg-slate-50 rounded-xl border border-slate-100 min-h-[50px]">
                    <p class="text-xs text-slate-600 font-medium" id="selected-mentions-display">
                        <span class="text-slate-400 italic">Pilih target di atas untuk ditambahkan...</span>
                    </p>
                </div>
            </div>

            <!-- HASHTAG CATEGORY SELECTOR -->
            <div class="space-y-3" id="hashtag-selector-container">
                 <div class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">Pilih Kategori Tagar (Hashtag)</div>
                <div class="flex flex-wrap gap-2" id="hashtag-category-pills"></div>
                <!-- Selected Hashtags -->
                 <div class="mt-2 p-3 bg-slate-50 rounded-xl border border-slate-100 min-h-[50px]">
                    <p class="text-xs text-slate-600 font-medium" id="selected-hashtags-display">
                        <span class="text-slate-400 italic">Pilih tagar di atas untuk ditambahkan...</span>
                    </p>
                </div>
            </div>

            <!-- COPY BUTTON -->
            <button onclick="copyManualSelection()" class="w-full flex items-center justify-center space-x-2 py-3 rounded-xl font-black text-[13px] uppercase tracking-wider transition-all bg-red-600 text-white hover:bg-red-700 active:scale-[0.98] shadow-lg shadow-red-200 mt-4" id="copy-manual-btn">
                <i data-lucide="clipboard-list" class="w-4 h-4"></i>
                <span>SALIN SELEKSI MANUAL (0 Mention + 0 Tagar)</span>
            </button>
            <button onclick="resetManualSelection()" class="w-full text-xs text-slate-500 font-bold mt-2 hover:text-red-500 transition-colors">
                <i data-lucide="rotate-ccw" class="w-3 h-3 inline-block mr-1"></i> Reset Pilihan Manual
            </button>
        </section>

        <!-- HYBRID FILTERS (STICKY) -->
        <section class="sticky top-[85px] z-30 -mx-4 bg-[#F8FAFC]/80 backdrop-blur-md pt-2 pb-1 transition-all" id="sticky-filter">
            <div class="px-4 max-w-3xl mx-auto space-y-3">
                
                <!-- PLATFORM FILTER -->
                <div class="flex items-center space-x-2 overflow-x-auto pb-1 scrollbar-hide smooth-scroll-touch px-1" id="platform-filters"></div>

                <!-- TONE FILTER -->
                <div class="relative">
                    <div class="flex justify-between items-center mb-2 px-1">
                        <div class="text-[11px] font-bold text-slate-400 uppercase tracking-wider flex items-center">
                            <i data-lucide="sliders-horizontal" class="w-3 h-3 mr-1.5"></i> Gaya Pesan (Tone)
                        </div>
                         <button onclick="toggleToneDropdown()" id="tone-toggle-btn" class="text-[11px] font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded-full flex items-center transition-all hover:bg-blue-100 active:scale-95">
                            <span>Lihat Semua</span> <i data-lucide="chevron-down" class="w-3 h-3 ml-1 transition-transform" id="tone-toggle-icon"></i>
                        </button>
                    </div>

                    <!-- SLIDER -->
                    <div id="tone-slider" class="flex space-x-2 overflow-x-auto pb-3 px-1 scrollbar-hide smooth-scroll-touch snap-x snap-mandatory"></div>

                    <!-- DROPDOWN -->
                    <div id="tone-dropdown" class="hidden absolute top-full left-0 right-0 mt-2 p-3 bg-white rounded-2xl shadow-xl border border-slate-200/80 z-50 animate-in fade-in slide-in-from-top-2 duration-200">
                         <div class="grid grid-cols-2 sm:grid-cols-3 gap-2" id="tone-grid"></div>
                    </div>
                    <div id="dropdown-overlay" onclick="toggleToneDropdown()" class="hidden fixed inset-0 bg-slate-900/20 z-40 backdrop-blur-sm transition-opacity"></div>
                </div>

            </div>
             <div class="h-4 bg-gradient-to-b from-[#F8FAFC]/80 to-transparent pointer-events-none"></div>
        </section>

        <!-- TEMPLATE LIST -->
        <div id="template-list" class="space-y-4 min-h-[60vh] px-1"></div>

         <!-- EMPTY STATE -->
        <div id="empty-state" class="hidden flex-col items-center justify-center py-16 px-4 text-center">
            <div class="bg-slate-100 p-4 rounded-full mb-4">
                <i data-lucide="search-x" class="w-8 h-8 text-slate-400"></i>
            </div>
            <p class="text-slate-900 font-bold">Tidak Ditemukan</p>
            <p class="text-slate-500 text-sm mt-1 mb-6">Coba kombinasi filter yang berbeda.</p>
            <button onclick="resetFilters()" class="bg-slate-900 text-white px-6 py-2.5 rounded-full font-bold text-sm shadow-lg shadow-slate-200 active:scale-95 transition-transform">
                Reset Filter
            </button>
        </div>

    </main>

    <!-- TOAST -->
    <div id="toast" class="fixed top-6 inset-x-4 z-[100] pointer-events-none flex justify-center transition-all duration-500 -translate-y-40 opacity-0">
        <div class="bg-slate-900/95 backdrop-blur-md text-white px-6 py-3.5 rounded-2xl font-bold text-[13px] shadow-2xl flex items-center space-x-3 border border-white/10 ring-1 ring-black/5 max-w-xs w-full justify-center">
            <i data-lucide="check-circle-2" class="w-5 h-5 text-emerald-400 shrink-0"></i>
            <span id="toast-msg" class="truncate">Berhasil disalin!</span>
        </div>
    </div>

    <script>
        const LOSS_VALUE_UI = "Melebihi 1T+";
        const LOSS_VARIANTS = [
            "Lebih dari 1 Triliun Rupiah lenyap tak berbekas",
            "Angka fantastis 1T+ yang raib ditelan bumi",
            "Kerugian masif menembus 1 Triliun dan terus naik",
            "Skandal 1 Triliun lebih yang menghancurkan ribuan keluarga",
            "Dana umat 1T+ menguap tanpa pertanggungjawaban",
            "Megaskandal 1 Triliun Rupiah yang didiamkan regulator",
            "Tragedi finansial 1T+ yang mengiris hati rakyat",
            "Uang pensiun dan masa depan senilai 1T+ hancur lebur",
            "Total dana macet yang kini melampaui 1 Triliun Rupiah",
            "Bencana keuangan 1T+ yang tak kunjung ada solusi",
            "Kejahatan kerah putih senilai 1 Triliun lebih",
            "Perampokan legal 1T+ di depan mata OJK",
            "Akumulasi kerugian yang sudah tembus 1 Triliun Rupiah",
            "Hilangnya hak lender senilai lebih dari 1 Triliun",
            "Dana 1T+ yang disandera manajemen tidak kompeten",
            "1 Triliun lebih uang rakyat yang kini jadi debu",
            "Nilai gagal bayar yang meroket di atas 1 Triliun",
            "Kerugian kolektif 1T+ yang menuntut keadilan",
            "Skema gali lubang tutup lubang senilai 1 Triliun lebih",
            "1T+ dana masyarakat yang dipermainkan",
            "Dampak sistemik kerugian 1 Triliun Rupiah",
            "Triliunan rupiah uang keringat rakyat yang tak kembali",
            "Angka 1T+ bukan sekadar statistik, ini nyawa kami",
            "Kegagalan bayar terbesar senilai 1 Triliun lebih",
            "1 Triliun lebih dana amanah yang dikhianati",
            "Kerugian finansial 1T+ yang mencoreng industri",
            "Uang 1 Triliun lebih yang tak tahu rimbanya",
            "Ledakan gagal bayar menembus angka psikologis 1T",
            "1T+ kerugian nyata di depan mata",
            "Dana 1 Triliun lebih yang diputar tanpa izin",
            "Kecolongan 1 Triliun lebih di bawah pengawasan negara",
            "1T+ bukti nyata lemahnya perlindungan konsumen",
            "Kerugian jumbo 1 Triliun Rupiah yang menyengsarakan",
            "Uang 1T+ yang dibawa lari manajemen bobrok",
            "Tabungan masa tua 1 Triliun lebih yang dirampas",
            "1T+ uang lender yang kini cuma jadi angka di layar",
            "Kerugian 1 Triliun lebih yang terus membengkak setiap detik",
            "Dana 1T+ yang menjadi bukti kejahatan korporasi",
            "1 Triliun Rupiah lebih yang harus dipertanggungjawabkan dunia akhirat",
            "Tragedi 1T+ yang membuat ribuan orang menangis"
        ];

        function getRandomLossVariant() {
            const index = Math.floor(Math.random() * LOSS_VARIANTS.length);
            return LOSS_VARIANTS[index];
        }

        const DB = {
            targets_full: [
                "@prabowo", "@gibran_rakabuming", "@kantorstafpresidenri", "@setneg_ri", "@sekretariat.kabinet",
                "@ojkindonesia", "@ombudsmanri137", "@bank_indonesia", "@lps_idic", "@kemenkeuri",
                "@kejaksaan.ri", "@bareskrim.polri", "@divisihumaspolri", "@official.kpk", "@ppatk_indonesia", "@dittipideksus",
                "@dpr_ri", "@mprgoid", "@mmisbakhun", "@ahmadsahroni88", "@puteri.komarudin", "@andre_rosiade", "@bambang.soesatyo", "@puanmaharaniri", "@fauzihamro_nasdem",
                "@najwashihab", "@matanajwa", "@narasi.tv", "@tempodotco", "@projectm_org", "@kompascom", "@detikcom", "@tvonenews", "@cnbcindonesia",
                "@hotmanparisofficial", "@mohmahfudmd", "@haris_azhar", "@rockygerung.official", "@reflyharun", "@novelbaswedanofficial", "@bintangemon", "@panji.pragiwaksono", "@zainalarifinmochtar", "@feriamsari", "@abrahamsamad_", "@febridiansyah.id", "@sandiagouno", "@aniesbaswedan", "@ganjar_pranowo", "@ridwankamil",
                "@raymondchins", "@feliciatjiasaka", "@timothyronald", "@radityadika", "@pritaghozie", "@mrshananto", "@ngomonginuang", "@rivankurniawan", "@doddy.bicarainvestasi", "@andhika.diskartes", "@lukeluki", "@ellenmay_official", "@bongchandra", "@chandraputranegara", "@tungdesemwaringin.tdw", "@merryriana", "@renald.kasali", "@tommcifle", "@catatanseorangtrader", "@bigalphaid",
                "@mastercorbuzier", "@sumargodenny", "@karniilyas_official", "@dr.tirta", "@attahalilintar", "@raffiahmad1717", "@baimwong", "@nikitamirzanimawardi_172", "@king_uyakuya", "@jeromepolin", "@ariefmuhammad", "@young_lex18", "@vindest.ig", "@desta80s", "@vincentrompies", "@andreastaulany", "@sule.prikitiw", "@ruben_onsu", "@ivan_gunawan", "@lambe_turah",
                "@felix.siauw", "@ustadzabdulsomad_official", "@adihidayatofficial", "@aagym", "@dasadlatif1212", "@buyayahya_albahjah", "@hanan_attaki", "@khalidbasalamahofficial", "@syafiqrizabasalamah_official", "@yusufmansurnew", "@hilmanfauji", "@habibjafar", "@gusmiftah", "@muipusat", "@dsnmuiinstitute", "@nahdlatululama", "@muhammadiyah"
            ],
            
            hashtags_full: [
                "#Danasyariah", "#KembalikanDanaLenderDSI", "#PaguyubanLenderDSI", "#SaveLenderDSI", 
                "#OJKGagalMengawasi", "#UsutTuntasDSI", "#DPRBertindak", "#OJKturuntanganDSI", 
                "#LenderButuhJawaban", "#Tragedi1TriliunPlus", "#Melebihi1Triliun", 
                "#KejahatanKerahPutih", "#TemanSyariah", "#LenderKeluhkanDSI", "#DPRkawalLenderDSI", 
                "#RevolusiFintech", "#CekalDireksiDSI", "#StopFintechBodong", "#RakyatKorbanRegulator",
                "#TPPUFintech", "#AuditForensikDSI", "#MafiaKeuanganSyariah", "#NegaraGagalHadir", 
                "#KejagungBergerak", "#PrabowoLindungiRakyat", "#MiskinkanDireksiDSI", 
                "#WibawaNegaraLumpuh", "#SyariahDikhianati", "#GantiRugiKorbanOJK"
            ],
            
            mentions_wajib: ["@prabowo", "@gibran_rakabuming", "@ojkindonesia", "@kejaksaan.ri", "@dpr_ri", "@ombudsmanri137"],
            
            hashtags_utama: ["#KembalikanDanaLenderDSI", "#SaveLenderDSI", "#OJKGagalMengawasi", "#Tragedi1TriliunPlus", "#Melebihi1Triliun"],
            
            manual_targets: {
                "RI 1 & Istana": ["@prabowo", "@gibran_rakabuming", "@kantorstafpresidenri", "@setneg_ri", "@sekretariat.kabinet"],
                "Aparat Penegak Hukum": ["@kejaksaan.ri", "@bareskrim.polri", "@official.kpk", "@ppatk_indonesia", "@dittipideksus", "@divisihumaspolri"],
                "Regulator & Ombudsman": ["@ojkindonesia", "@ombudsmanri137", "@bank_indonesia", "@kemenkeuri", "@lps_idic"],
                "DPR (Keuangan & Hukum)": ["@dpr_ri", "@mmisbakhun", "@ahmadsahroni88", "@puteri.komarudin", "@fauzihamro_nasdem", "@andre_rosiade", "@bambang.soesatyo"],
                "Influencer Hukum & Politik": [
                    "@hotmanparisofficial", "@mohmahfudmd", "@najwashihab", "@haris_azhar", "@rockygerung.official", 
                    "@reflyharun", "@novelbaswedanofficial", "@bintangemon", "@panji.pragiwaksono", "@zainalarifinmochtar",
                    "@feriamsari", "@abrahamsamad_", "@febridiansyah.id", "@sandiagouno", "@aniesbaswedan", 
                    "@ganjar_pranowo", "@ridwankamil"
                ],
                "Influencer Finansial & Bisnis": [
                    "@raymondchins", "@feliciatjiasaka", "@timothyronald", "@radityadika", "@pritaghozie", 
                    "@mrshananto", "@ngomonginuang", "@rivankurniawan", "@doddy.bicarainvestasi", "@andhika.diskartes", 
                    "@lukeluki", "@ellenmay_official", "@bongchandra", "@chandraputranegara", "@tungdesemwaringin.tdw",
                    "@merryriana", "@renald.kasali", "@tommcifle"
                ],
                "Mega Influencer & Podcast": [
                    "@mastercorbuzier", "@sumargodenny", "@karniilyas_official", "@dr.tirta", "@attahalilintar", 
                    "@raffiahmad1717", "@baimwong", "@nikitamirzanimawardi_172", "@king_uyakuya", "@jeromepolin", 
                    "@ariefmuhammad", "@young_lex18", "@vindest.ig", "@desta80s", "@vincentrompies", 
                    "@andreastaulany", "@sule.prikitiw", "@ruben_onsu", "@ivan_gunawan"
                ],
                "Tokoh Agama & Moral": [
                    "@felix.siauw", "@ustadzabdulsomad_official", "@adihidayatofficial", "@aagym", "@dasadlatif1212", 
                    "@buyayahya_albahjah", "@hanan_attaki", "@khalidbasalamahofficial", "@syafiqrizabasalamah_official", 
                    "@yusufmansurnew", "@hilmanfauji", "@habibjafar", "@gusmiftah", "@muipusat", 
                    "@dsnmuiinstitute", "@nahdlatululama", "@muhammadiyah"
                ]
            },
            
            manual_hashtags: {
                "Tuntutan Kunci": ["#SaveLenderDSI", "#KembalikanDanaLenderDSI", "#Tragedi1TriliunPlus", "#OJKGagalMengawasi"],
                "Investigasi Hukum": ["#TPPUFintech", "#AuditForensikDSI", "#UsutTuntasDSI", "#CekalDireksiDSI", "#KejagungBergerak"],
                "Politik & Reformasi": ["#DPRBertindak", "#RakyatKorbanRegulator", "#PrabowoLindungiRakyat", "#GantiRugiKorbanOJK"],
                "Gerakan Viral": ["#PaguyubanLenderDSI", "#RevolusiFintech", "#WibawaNegaraLumpuh", "#MafiaKeuanganSyariah"]
            },

            platforms: [
                { id: 'all', icon: 'layers', label: 'Semua' },
                { id: 'Instagram', icon: 'instagram', label: 'Instagram' },
                { id: 'X', icon: 'twitter', label: 'X / Twitter' },
                { id: 'TikTok', icon: 'video', label: 'TikTok' },
                { id: 'Facebook', icon: 'facebook', label: 'Facebook' },
            ],

            tones: [
                { id: 'all', label: 'Semua Gaya', icon: 'layout-grid', color: 'from-slate-600 to-slate-800', bg: 'bg-slate-900', text: 'text-white' },
                { id: 'Tuntutan', label: 'Tuntutan Regulator', icon: 'clipboard-check', color: 'from-sky-600 to-blue-700', bg: 'bg-sky-50', text: 'text-sky-700' },
                { id: 'Ultimatum', label: 'Gebrakan Keras', icon: 'bomb', color: 'from-red-600 to-red-700', bg: 'bg-red-50', text: 'text-red-700' },
                { id: 'Investigasi', label: 'Tuntut Audit KPK', icon: 'search-code', color: 'from-indigo-600 to-blue-700', bg: 'bg-indigo-50', text: 'text-indigo-700' },
                { id: 'Kemanusiaan', label: 'Jeritan Hati', icon: 'heart-crack', color: 'from-rose-500 to-pink-600', bg: 'bg-rose-50', text: 'text-rose-700' },
                { id: 'Fakta', label: 'Data & Bukti', icon: 'file-bar-chart-2', color: 'from-cyan-600 to-sky-700', bg: 'bg-cyan-50', text: 'text-cyan-700' },
                { id: 'Satire', label: 'Sindiran Pedas', icon: 'laugh', color: 'from-purple-600 to-violet-700', bg: 'bg-purple-50', text: 'text-purple-700' },
                { id: 'Religius', label: 'Gugatan Moral', icon: 'book-open-check', color: 'from-emerald-600 to-green-700', bg: 'bg-emerald-50', text: 'text-emerald-700' },
                { id: 'Hukum', label: 'Ancaman Pidana', icon: 'scale', color: 'from-slate-700 to-gray-800', bg: 'bg-slate-100', text: 'text-slate-800' },
                { id: 'Aksi', label: 'Ajakan Boikot', icon: 'zap', color: 'from-orange-500 to-red-600', bg: 'bg-orange-50', text: 'text-orange-700' },
                { id: 'Influencer', label: 'Tantang Tokoh', icon: 'mic', color: 'from-pink-500 to-rose-500', bg: 'bg-pink-50', text: 'text-pink-700' },
                { id: 'Komparasi', label: 'Banding Kasus', icon: 'git-compare-arrows', color: 'from-lime-600 to-green-700', bg: 'bg-lime-50', text: 'text-lime-800' },
                { id: 'Viral', label: 'Gerakan Viral', icon: 'megaphone', color: 'from-amber-500 to-orange-600', bg: 'bg-amber-50', text: 'text-amber-800' },
                { id: 'Presiden', label: 'Lapor Presiden', icon: 'flag', color: 'from-blue-800 to-red-600', bg: 'bg-blue-50', text: 'text-blue-800' },
                { id: 'Media', label: 'Liputan Media', icon: 'newspaper', color: 'from-gray-500 to-gray-700', bg: 'bg-gray-100', text: 'text-gray-700' },
            ],

            templates: [
                // 1. TUNTUTAN REGULATOR (28 ALL + Varian Platform)
                { tone: 'Tuntutan', platform: 'all', text: "Yth @ojkindonesia, kami menuntut transparansi total atas ${LOSS_VALUE_LONG}. Jangan biarkan DSI berlindung di balik prosedur yang berbelit! [TAGS] [HASHTAGS]" },
                { tone: 'Tuntutan', platform: 'all', text: "Komisi XI @dpr_ri, panggil OJK segera! Kegagalan pengawasan mereka menyebabkan ${LOSS_VALUE_LONG}. Rakyat butuh keadilan! [TAGS] [HASHTAGS]" },
                { tone: 'Tuntutan', platform: 'all', text: "OJK wajib bertanggung jawab! Logo kalian di DSI adalah alasan kami percaya, dan kini ${LOSS_VALUE_LONG} raib. Mana jaminannya? [TAGS] [HASHTAGS]" },
                { tone: 'Tuntutan', platform: 'all', text: "Kami menolak mediasi tanpa hasil! Tuntutan kami jelas: Kembalikan pokok dana ${LOSS_VALUE_LONG} sekarang juga! @ojkindonesia [TAGS] [HASHTAGS]" },
                { tone: 'Tuntutan', platform: 'all', text: "Cabut izin operasi DSI secara permanen dan BEKUKAN aset pribadi manajemen untuk ganti rugi ${LOSS_VALUE_LONG}! [TAGS] [HASHTAGS]" },
                
                // 2. ULTIMATUM (28 ALL + Varian)
                { tone: 'Ultimatum', platform: 'all', text: "WAKTU HABIS! Kami beri waktu 3x24 jam untuk kejelasan ${LOSS_VALUE_LONG} atau kami duduki kantor kalian! [TAGS] [HASHTAGS]" },
                { tone: 'Ultimatum', platform: 'all', text: "Jangan uji kesabaran ribuan korban. Kemarahan kami setara dengan kerugian ${LOSS_VALUE_LONG} yang kalian buat! [TAGS] [HASHTAGS]" },
                { tone: 'Ultimatum', platform: 'all', text: "Ini peringatan terakhir! Selesaikan pembayaran atau kami bawa kasus ${LOSS_VALUE_LONG} ini ke ranah internasional! [TAGS] [HASHTAGS]" },
                
                // 3. INVESTIGASI (28 ALL + Varian)
                { tone: 'Investigasi', platform: 'all', text: "Ada bau busuk TPPU di DSI! @ppatk_indonesia tolong telusuri aliran dana ${LOSS_VALUE_LONG} ke rekening pribadi! [TAGS] [HASHTAGS]" },
                { tone: 'Investigasi', platform: 'all', text: "Mohon @official.kpk selidiki oknum OJK yang 'meloloskan' laporan keuangan DSI hingga rugi ${LOSS_VALUE_LONG}! [TAGS] [HASHTAGS]" },
                { tone: 'Investigasi', platform: 'all', text: "Audit Forensik harga mati! Kami curiga proyek fiktif mendominasi kerugian ${LOSS_VALUE_LONG} ini. [TAGS] [HASHTAGS]" },
                
                // 4. KEMANUSIAAN (28 ALL + Varian)
                { tone: 'Kemanusiaan', platform: 'all', text: "Bapak @prabowo, ini uang pensiun ayah saya. Beliau sakit keras. Tega DSI menghilangkan ${LOSS_VALUE_LONG}? ðŸ˜­ [TAGS] [HASHTAGS]" },
                { tone: 'Kemanusiaan', platform: 'all', text: "Kami bukan orang kaya. Kami menabung untuk biaya sekolah anak, kini lenyap ${LOSS_VALUE_LONG}. Hancur hati kami! [TAGS] [HASHTAGS]" },
                
                // 5. FAKTA & DATA (28 ALL + Varian)
                { tone: 'Fakta', platform: 'all', text: "Data tidak bohong! TKB90 DSI di website 98% tapi realitanya gagal bayar ${LOSS_VALUE_LONG}. Ini FRAUD! [TAGS] [HASHTAGS]" },
                { tone: 'Fakta', platform: 'all', text: "Fakta: OJK baru bertindak SETELAH viral. Kemana fungsi pengawasan preventif terhadap ${LOSS_VALUE_LONG}? [TAGS] [HASHTAGS]" },
                
                // 6. SATIRE (28 ALL + Varian)
                { tone: 'Satire', platform: 'all', text: "Investasi di DSI itu melatih kesabaran & keikhlasan. Bonusnya? Kehilangan ${LOSS_VALUE_LONG}. Makasih OJK tutorialnya! ðŸ¤¡ [TAGS] [HASHTAGS]" },
                { tone: 'Satire', platform: 'all', text: "Logo OJK di DSI fungsinya apa ya? Hiasan dinding? Pemanis buatan? Soalnya gak ngaruh ke keamanan ${LOSS_VALUE_LONG}. ðŸ¤·â€â™‚ï¸ [TAGS] [HASHTAGS]" },
                
                // 7. RELIGIUS
                { tone: 'Religius', platform: 'all', text: "Wahai manajemen DSI, ingatlah hisab di akhirat lebih berat dari audit OJK! Kembalikan ${LOSS_VALUE_LONG} umat! [TAGS] [HASHTAGS]" },
                
                // 8. HUKUM
                { tone: 'Hukum', platform: 'all', text: "Kami gugat Wanprestasi & Perbuatan Melawan Hukum! DSI wajib bayar ganti rugi materiil immateriil atas ${LOSS_VALUE_LONG}! [TAGS] [HASHTAGS]" },
                
                // 9. AKSI
                { tone: 'Aksi', platform: 'all', text: "Rapatkan barisan! Besok kita serbu kolom komentar IG Presiden serentak! Tuntut ${LOSS_VALUE_LONG}! [TAGS] [HASHTAGS]" },
                
                // 10. INFLUENCER
                { tone: 'Influencer', platform: 'all', text: "@mastercorbuzier undang korban DSI ke podcast! Bongkar borok regulator yang bikin rugi ${LOSS_VALUE_LONG}! [TAGS] [HASHTAGS]" },
                
                // 11. KOMPARASI
                { tone: 'Komparasi', platform: 'all', text: "First Travel disita asetnya. DSI kok santai? Padahal kerugian ${LOSS_VALUE_LONG} lebih masif! Samakan hukumnya! [TAGS] [HASHTAGS]" },
                
                // 12. VIRAL
                { tone: 'Viral', platform: 'all', text: "Bantu RT/Share! Kasus DSI ${LOSS_VALUE_LONG} harus trending 1! Jangan kasih kendor pasukan netizen! ðŸ”¥ [TAGS] [HASHTAGS]" },
                
                // 13. PRESIDEN
                { tone: 'Presiden', platform: 'all', text: "Lapor Pak @prabowo! Ada maling legal berizin OJK merampok ${LOSS_VALUE_LONG}. Mohon petunjuk & tindakan! ðŸ«¡ [TAGS] [HASHTAGS]" },
                
                // 14. MEDIA
                { tone: 'Media', platform: 'all', text: "Panggilan untuk jurnalis investigasi! Ada skandal ${LOSS_VALUE_LONG} yang siap meledak. Datanya lengkap! Hubungi kami! [TAGS] [HASHTAGS]" },
            ]
        };
        
        const additionalVariations = [
            "Makan harta orang lain secara batil adalah dosa. ${LOSS_VALUE_LONG} itu bara api neraka.",
            "Label Syariah bukan tameng untuk menipu. Kembalikan ${LOSS_VALUE_LONG} atau azab menanti.",
            "Doa orang teraniaya tidak ada hijabnya. Hati-hati DSI, ${LOSS_VALUE_LONG} akan jadi karma.",
            "Pidana penggelapan menunggu direksi DSI. ${LOSS_VALUE_LONG} bukti nyata kejahatan korporasi.",
            "Somasi terbuka! 7x24 jam kembalikan ${LOSS_VALUE_LONG} atau kami lapor Bareskrim.",
            "Gugat Class Action adalah jalan ninja kami merebut kembali ${LOSS_VALUE_LONG}.",
            "Boikot semua produk afiliasi bos DSI! Jangan kasih napas sampai ${LOSS_VALUE_LONG} lunas.",
            "Siapkan spanduk! Kita demo depan OJK tuntut ganti rugi ${LOSS_VALUE_LONG}.",
            "Satu komando! Spam tagar #SaveLenderDSI sekarang! ${LOSS_VALUE_LONG} harus viral.",
            "Dimana influencer yang dulu promo DSI? Tanggung jawab moral woy atas ${LOSS_VALUE_LONG}!",
            "Bantu kami @hotmanparisofficial! Rakyat kecil butuh bantuan hukum lawan raksasa perampok ${LOSS_VALUE_LONG}.",
            "Jiwasraya dibantu negara, DSI dianak-tirikan. Padahal sama-sama rugi triliunan (${LOSS_VALUE_LONG}).",
            "BLBI ditalangi, DSI dicuekin. Keadilan sosial bagi seluruh rakyat... yang mana? ${LOSS_VALUE_LONG}!",
            "Netizen Indonesia, tunjukkan kekuatanmu! Kawal kasus ${LOSS_VALUE_LONG} ini.",
            "Jangan scroll dulu! Ini menyangkut uang pensiun ortu kami yang hilang ${LOSS_VALUE_LONG}.",
            "Pak @prabowo, tolong gebrak meja OJK! Suruh mereka kerja bener urus ${LOSS_VALUE_LONG}.",
            "Harapan terakhir kami ada di tangan Presiden. Selamatkan korban ${LOSS_VALUE_LONG}.",
            "Media tolong jangan bungkam! Angkat berita ${LOSS_VALUE_LONG} ini ke permukaan.",
            "Breaking News yang kami tunggu: DSI Mulai Cicil ${LOSS_VALUE_LONG}. Kapan diliput?"
        ];

        function generateMoreTemplates() {
             const tones = DB.tones.map(t => t.id).filter(id => id !== 'all');
             const structures = [
                 "Kami menuntut keadilan atas ${LOSS_VALUE_LONG}! [TAGS] [HASHTAGS]",
                 "Jangan diam saja melihat ${LOSS_VALUE_LONG} uang rakyat hilang! [TAGS] [HASHTAGS]",
                 "Sampai kapan kami harus menunggu kepastian ${LOSS_VALUE_LONG}? [TAGS] [HASHTAGS]",
                 "OJK Gagal! DSI Curang! Kembalikan ${LOSS_VALUE_LONG}! [TAGS] [HASHTAGS]",
                 "Solidaritas untuk korban DSI yang rugi ${LOSS_VALUE_LONG}. [TAGS] [HASHTAGS]"
             ];

             tones.forEach(tone => {
                 const currentCount = DB.templates.filter(t => t.tone === tone).length;
                 const needed = 35 - currentCount;
                 
                 if (needed > 0) {
                     for(let i=0; i<needed; i++) {
                         const base = additionalVariations[i % additionalVariations.length] || structures[i % structures.length];
                         const prefix = ["TOLONG!", "MOHON!", "VIRALKAN!", "URGENT!", "PENTING!", "BREAKING:", "UPDATE:", "INFO:", "WARNING:"][i % 9];
                         
                         DB.templates.push({
                             tone: tone,
                             platform: 'all', 
                             text: `${prefix} ${base}`
                         });
                     }
                 }
             });
        }
        
        generateMoreTemplates();

        // State logic (sama seperti sebelumnya)
        let state = { 
            platform: 'all', 
            tone: 'all',
            selectedMentions: new Set(DB.mentions_wajib), 
            selectedHashtags: new Set(DB.hashtags_utama), 
            randomizedTemplates: [] 
        };
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function renderManualSelector() {
            const mentionContainer = document.getElementById('mention-category-pills');
            const hashtagContainer = document.getElementById('hashtag-category-pills');
            
            mentionContainer.innerHTML = Object.entries(DB.manual_targets).map(([category, targets]) => {
                const allSelected = targets.every(t => state.selectedMentions.has(t));
                return `
                    <div class="inline-flex items-center rounded-full bg-slate-100 p-1 border border-slate-200 cursor-pointer hover:bg-slate-200 transition-colors">
                        <span onclick="toggleAllManual('mention', '${category}', ${allSelected})" class="px-2 py-1 rounded-full text-[10px] font-bold uppercase ${allSelected ? 'bg-blue-600 text-white' : 'text-slate-600'} hover:bg-blue-500/80 transition-all">
                            ${category} (${targets.length})
                        </span>
                        <div class="flex flex-wrap p-1 gap-1">
                            ${targets.map(t => `
                                <span onclick="toggleManualSelection('mention', '${t}')" class="target-pill ${state.selectedMentions.has(t) ? 'bg-blue-200 text-blue-800 selected' : 'bg-white text-slate-800'} px-2 py-0.5 rounded-full text-xs font-medium shadow-sm hover:ring-2 hover:ring-blue-300 transition-all">
                                    ${t}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
            
            hashtagContainer.innerHTML = Object.entries(DB.manual_hashtags).map(([category, tags]) => {
                const allSelected = tags.every(t => state.selectedHashtags.has(t));
                return `
                    <div class="inline-flex items-center rounded-full bg-slate-100 p-1 border border-slate-200 cursor-pointer hover:bg-slate-200 transition-colors">
                        <span onclick="toggleAllManual('hashtag', '${category}', ${allSelected})" class="px-2 py-1 rounded-full text-[10px] font-bold uppercase ${allSelected ? 'bg-amber-600 text-white' : 'text-slate-600'} hover:bg-amber-500/80 transition-all">
                            ${category} (${tags.length})
                        </span>
                        <div class="flex flex-wrap p-1 gap-1">
                            ${tags.map(t => `
                                <span onclick="toggleManualSelection('hashtag', '${t}')" class="target-pill ${state.selectedHashtags.has(t) ? 'bg-amber-200 text-amber-800 selected' : 'bg-white text-slate-800'} px-2 py-0.5 rounded-full text-xs font-medium shadow-sm hover:ring-2 hover:ring-amber-300 transition-all">
                                    ${t}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
            
            updateManualDisplay();
            lucide.createIcons();
        }

        function toggleAllManual(type, category, currentlySelected) {
            const list = type === 'mention' ? DB.manual_targets[category] : DB.manual_hashtags[category];
            const targetSet = type === 'mention' ? state.selectedMentions : state.selectedHashtags;
            const mandatory = type === 'mention' ? DB.mentions_wajib : DB.hashtags_utama;

            if (currentlySelected) {
                list.forEach(item => {
                    if (!mandatory.includes(item)) targetSet.delete(item);
                });
            } else {
                list.forEach(item => targetSet.add(item));
            }
            renderManualSelector();
        }

        function toggleManualSelection(type, item) {
            const targetSet = type === 'mention' ? state.selectedMentions : state.selectedHashtags;
            const mandatory = type === 'mention' ? DB.mentions_wajib : DB.hashtags_utama;

            if (mandatory.includes(item)) {
                if (targetSet.has(item)) {
                    showToast(`"${item}" adalah target wajib.`);
                    return;
                }
            }

            if (targetSet.has(item)) targetSet.delete(item);
            else targetSet.add(item);
            renderManualSelector();
        }

        function updateManualDisplay() {
            const mentionsDisplay = document.getElementById('selected-mentions-display');
            const hashtagsDisplay = document.getElementById('selected-hashtags-display');
            const copyBtn = document.getElementById('copy-manual-btn');
            
            const selectedMentions = Array.from(state.selectedMentions).sort();
            const selectedHashtags = Array.from(state.selectedHashtags).sort();
            
            mentionsDisplay.innerHTML = selectedMentions.length > 0
                ? selectedMentions.map(m => `<span class="inline-flex bg-blue-100 text-blue-700 px-2 py-1 rounded-lg text-xs font-medium mb-1 mr-1">${m}</span>`).join('')
                : '<span class="text-slate-400 italic">Pilih target di atas untuk ditambahkan...</span>';
                
            hashtagsDisplay.innerHTML = selectedHashtags.length > 0
                ? selectedHashtags.map(h => `<span class="inline-flex bg-amber-100 text-amber-700 px-2 py-1 rounded-lg text-xs font-medium mb-1 mr-1">${h}</span>`).join('')
                : '<span class="text-slate-400 italic">Pilih tagar di atas untuk ditambahkan...</span>';
            
            copyBtn.textContent = `SALIN SELEKSI MANUAL (${selectedMentions.length} Mention + ${selectedHashtags.length} Tagar)`;
        }
        
        function resetManualSelection() {
            state.selectedMentions = new Set(DB.mentions_wajib);
            state.selectedHashtags = new Set(DB.hashtags_utama);
            renderManualSelector();
            showToast("Seleksi manual di-reset ke Wajib & Utama.");
        }
        
        async function copyManualSelection() {
            const final = `${Array.from(state.selectedMentions).join(' ')} ${Array.from(state.selectedHashtags).join(' ')}`.trim();
            if (final.length === 0) { showToast("Pilih minimal 1 Mention/Tagar!"); return; }
            await copyText(final, `Seleksi Manual Tersalin!`, 'copy-manual-btn');
        }

        function renderPlatforms() {
            const container = document.getElementById('platform-filters');
            container.innerHTML = DB.platforms.map(p => `
                <button onclick="setPlatform('${p.id}')" class="flex-shrink-0 flex items-center space-x-1.5 px-3.5 py-2 rounded-full font-bold text-[11px] uppercase transition-all ${state.platform === p.id ? 'bg-slate-900 text-white shadow-md ring-2 ring-slate-800 ring-offset-1' : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50'}">
                    <i data-lucide="${p.icon}" class="w-3.5 h-3.5"></i> <span>${p.label}</span>
                </button>
            `).join('');
        }

        function renderTones() {
            const slider = document.getElementById('tone-slider');
            slider.innerHTML = DB.tones.map(t => `
                <button onclick="setTone('${t.id}')" id="tone-slide-${t.id}" class="flex-shrink-0 snap-start flex items-center space-x-1.5 px-4 py-2.5 rounded-xl font-bold text-[11px] uppercase transition-all border ${state.tone === t.id ? `bg-gradient-to-r ${t.color} text-white border-transparent shadow-md scale-[1.02]` : 'bg-white border-slate-200 text-slate-500 hover:bg-slate-50'}">
                    <i data-lucide="${t.icon}" class="w-3.5 h-3.5"></i>
                    <span>${t.label}</span>
                </button>
            `).join('');

            const grid = document.getElementById('tone-grid');
            grid.innerHTML = DB.tones.map(t => `
                 <button onclick="setTone('${t.id}'); toggleToneDropdown(false)" class="flex items-center space-x-2 px-3 py-3 rounded-xl font-bold text-[11px] uppercase transition-all border text-left ${state.tone === t.id ? `bg-gradient-to-r ${t.color} text-white border-transparent shadow-md ring-2 ring-offset-2 ring-blue-500` : `bg-white border-slate-200 text-slate-600 hover:bg-slate-50 hover:border-blue-200`}">
                    <div class="p-1.5 rounded-lg ${state.tone === t.id ? 'bg-white/20' : t.bg + ' ' + t.text}">
                        <i data-lucide="${t.icon}" class="w-4 h-4"></i>
                    </div>
                    <span class="truncate">${t.label}</span>
                </button>
            `).join('');
            
            setTimeout(() => {
               const active = document.getElementById(`tone-slide-${state.tone}`);
               if (active && state.tone !== 'all') active.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }, 100);

            lucide.createIcons();
        }

        function renderTemplates() {
            const container = document.getElementById('template-list');
            const emptyState = document.getElementById('empty-state');
            
            let filtered = state.randomizedTemplates.filter(t =>
                (state.platform === 'all' || t.platform === 'all' || t.platform === state.platform) &&
                (state.tone === 'all' || t.tone === state.tone)
            );
            
            if (state.tone !== 'all' || state.platform !== 'all') filtered = shuffleArray(filtered);

            if (filtered.length === 0) {
                container.classList.add('hidden');
                emptyState.classList.remove('hidden');
                emptyState.classList.add('flex');
            } else {
                container.classList.remove('hidden');
                emptyState.classList.add('hidden');
                emptyState.classList.remove('flex');

                container.innerHTML = filtered.map((t, index) => {
                    /* FIX: Use the unique ID from the template object, NOT the index */
                    const templateId = t.id;
                    
                    const toneData = DB.tones.find(tone => tone.id === t.tone) || DB.tones[0];
                    const platformData = DB.platforms.find(p => p.id === t.platform) || DB.platforms[0];
                    
                    // Generate specific loss variant for this render
                    const specificLossVariant = getRandomLossVariant();

                    const formattedText = t.text
                        .replace(/\[TAGS\]/g, '<span class="inline-flex items-center bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded-md font-bold text-[90%] -tracking-tight mx-0.5"><i data-lucide="at-sign" class="w-2.5 h-2.5 mr-0.5"></i>MENTION</span>')
                        .replace(/\[HASHTAGS\]/g, '<span class="inline-flex items-center bg-amber-50 text-amber-700 px-1.5 py-0.5 rounded-md font-bold text-[90%] -tracking-tight mx-0.5"><i data-lucide="hash" class="w-2.5 h-2.5 mr-0.5"></i>TAGAR</span>')
                        .replace(/\$\{LOSS_VALUE_LONG\}/g, specificLossVariant); // Use generated variant

                    return `
                        <div class="group relative bg-white rounded-2xl p-4 border border-slate-200 shadow-sm hover:shadow-md transition-all duration-300 animate-in fade-in slide-in-from-bottom-4" style="animation-delay: ${index * 30}ms; animation-fill-mode: both;">
                            <div class="absolute left-0 inset-y-4 w-1 rounded-r-full bg-gradient-to-b ${toneData.color}"></div>
                            <div class="pl-3.5">
                                <div class="flex flex-wrap items-center gap-2 mb-3">
                                    <span class="inline-flex items-center px-2.5 py-1 rounded-lg text-[10px] font-black uppercase text-white bg-gradient-to-r ${toneData.color} shadow-sm">
                                        <i data-lucide="${toneData.icon}" class="w-3 h-3 mr-1"></i> ${toneData.label}
                                    </span>
                                    ${t.platform !== 'all' ? `
                                    <span class="inline-flex items-center px-2 py-1 rounded-lg text-[10px] font-bold uppercase bg-slate-100 text-slate-500 border border-slate-200">
                                        <i data-lucide="${platformData.icon}" class="w-3 h-3 mr-1"></i> ${platformData.label}
                                    </span>` : ''}
                                </div>
                                <div class="bg-slate-50 p-3.5 rounded-xl border border-slate-100 mb-3 group-hover:border-slate-200 transition-colors">
                                    <p class="text-slate-800 text-[13px] md:text-sm leading-relaxed whitespace-pre-wrap font-medium">${formattedText}</p>
                                </div>
                                <!-- Attach specificLossVariant to data-loss-text so copy function uses it -->
                                <button onclick="copyTemplate('${templateId}')" id="btn-${templateId}" data-loss-text="${specificLossVariant}" class="w-full flex items-center justify-center space-x-2 py-3 rounded-xl font-black text-[13px] uppercase tracking-wider transition-all bg-slate-900 text-white hover:bg-slate-800 active:scale-[0.98] shadow-sm relative overflow-hidden">
                                    <div class="relative z-10 flex items-center space-x-2">
                                        <i data-lucide="copy" class="w-4 h-4"></i> <span>SALIN PESAN</span>
                                    </div>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            lucide.createIcons();
        }

        function toggleToneDropdown(forceState = null) {
            const dropdown = document.getElementById('tone-dropdown');
            const overlay = document.getElementById('dropdown-overlay');
            const icon = document.getElementById('tone-toggle-icon');
            const btn = document.getElementById('tone-toggle-btn');
            const shouldShow = forceState !== null ? forceState : dropdown.classList.contains('hidden');

            if (shouldShow) {
                dropdown.classList.remove('hidden');
                overlay.classList.remove('hidden');
                icon.style.transform = 'rotate(180deg)';
                btn.classList.add('bg-blue-100');
            } else {
                dropdown.classList.add('hidden');
                overlay.classList.add('hidden');
                icon.style.transform = 'rotate(0deg)';
                btn.classList.remove('bg-blue-100');
            }
        }

        function setPlatform(p) {
            state.platform = p;
            renderPlatforms();
            renderTemplates();
            document.getElementById('sticky-filter').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function setTone(t) {
            state.tone = t;
            renderTones();
            renderTemplates();
        }

        function resetFilters() {
            state.platform = 'all';
            state.tone = 'all';
            renderPlatforms();
            renderTones();
            state.randomizedTemplates = shuffleArray([...DB.templates]);
            renderTemplates();
        }

        async function copyText(text, successMsg, elementId = null) {
            try {
                // NOTE: Placeholder replacement logic moved to individual copy functions to ensure consistency
                const finalContent = text; 
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    await navigator.clipboard.writeText(finalContent);
                } else {
                    const tempInput = document.createElement('textarea');
                    tempInput.value = finalContent;
                    tempInput.style.position = 'absolute';
                    tempInput.style.left = '-9999px';
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    document.execCommand('copy');
                    document.body.removeChild(tempInput);
                }
                showToast(successMsg);
                if (elementId) animateSuccessButton(elementId);
            } catch (err) {
                showToast("Gagal salin otomatis.");
            }
        }

        function copyTargets(type) { 
            const targets = type === 'full' ? DB.targets_full : DB.mentions_wajib;
            copyText(targets.join(' '), `Mention ${type === 'full' ? 'Lengkap' : 'Wajib'} Tersalin! ðŸŽ¯`); 
        }
        
        function copyHashtags(type) { 
            const hashtags = type === 'full' ? DB.hashtags_full : DB.hashtags_utama;
            copyText(hashtags.join(' '), `Tagar ${type === 'full' ? 'Lengkap' : 'Utama'} Tersalin! ðŸ”¥`); 
        }

        // MODIFIED FUNCTION: Uses ID for stable lookup
        function copyTemplate(templateId) {
            // FIX: Find the template by its unique ID, not by index/filter logic which changes on render
            const t = DB.templates.find(item => item.id === templateId);

            if (t) {
                const mentionsToUse = Array.from(state.selectedMentions).join(' ') || DB.mentions_wajib.join(' ');
                const hashtagsToUse = Array.from(state.selectedHashtags).join(' ') || DB.hashtags_utama.join(' ');
                
                // Retrieve the SPECIFIC loss variant displayed on the button's data attribute
                const btnElement = document.getElementById(`btn-${templateId}`);
                // Robust fallback: if button missing or data missing, generate new one (unlikely)
                const lossVariantToUse = btnElement ? (btnElement.getAttribute('data-loss-text') || getRandomLossVariant()) : getRandomLossVariant();

                const final = t.text
                    .replace(/\[TAGS\]/g, mentionsToUse)
                    .replace(/\[HASHTAGS\]/g, hashtagsToUse)
                    .replace(/\$\{LOSS_VALUE_LONG\}/g, lossVariantToUse);

                copyText(final, "Pesan Siap Tempur! âš”ï¸", `btn-${templateId}`);
            }
        }

        function animateSuccessButton(btnId) {
            const btn = document.getElementById(btnId);
            if (!btn) return;
            const originalHTML = btn.innerHTML;
            btn.innerHTML = `<div class="relative z-10 flex items-center space-x-2 scale-110 transition-transform"><i data-lucide="check-circle-2" class="w-5 h-5"></i><span>BERHASIL DISALIN!</span></div>`;
            btn.classList.remove('bg-slate-900', 'text-white', 'bg-red-600', 'hover:bg-red-700', 'shadow-lg', 'shadow-red-200');
            btn.classList.add('bg-emerald-500', 'text-white', 'shadow-lg', 'shadow-emerald-500/30');
            lucide.createIcons();
            setTimeout(() => {
                btn.innerHTML = originalHTML;
                btn.classList.remove('bg-emerald-500', 'text-white', 'shadow-lg', 'shadow-emerald-500/30');
                if(btnId === 'copy-manual-btn') btn.classList.add('bg-red-600', 'text-white', 'hover:bg-red-700', 'shadow-lg', 'shadow-red-200');
                else btn.classList.add('bg-slate-900', 'text-white');
                lucide.createIcons();
            }, 2000);
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-msg').textContent = msg;
            toast.classList.remove('-translate-y-40', 'opacity-0');
            clearTimeout(window.toastTimer);
            window.toastTimer = setTimeout(() => toast.classList.add('-translate-y-40', 'opacity-0'), 2500);
        }

        function updateCountdown() {
            const startDate = new Date("November 18, 2025 00:00:00").getTime();
            const targetDate = new Date("November 18, 2026 00:00:00").getTime();
            const now = new Date().getTime();
            
            const distance = targetDate - now;
            
            const totalDuration = targetDate - startDate;
            const elapsed = now - startDate;
            let percentage = (elapsed / totalDuration) * 100;
            
            if (percentage < 0) percentage = 0;
            if (percentage > 100) percentage = 100;

            if (distance < 0) {
                document.getElementById("cd-days").innerText = "000";
                document.getElementById("cd-hours").innerText = "00";
                document.getElementById("cd-minutes").innerText = "00";
                document.getElementById("cd-seconds").innerText = "00";
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            document.getElementById("cd-days").innerText = String(days).padStart(3, '0');
            document.getElementById("cd-hours").innerText = String(hours).padStart(2, '0');
            document.getElementById("cd-minutes").innerText = String(minutes).padStart(2, '0');
            document.getElementById("cd-seconds").innerText = String(seconds).padStart(2, '0');
        }

        function init() {
            // Sanitize templates and Assign Unique IDs
            DB.templates.forEach((t, i) => {
                // FIX: Assign a stable Unique ID to each template
                t.id = `tpl-${i}`;
                
                if (!t.text.includes('[TAGS]')) t.text += ' [TAGS]';
                if (!t.text.includes('[HASHTAGS]')) t.text += ' [HASHTAGS]';
            });

            state.randomizedTemplates = shuffleArray([...DB.templates]);
            document.getElementById('target-count').textContent = `${DB.targets_full.length} Akun`;
            document.getElementById('hashtag-count').textContent = `${DB.hashtags_full.length} Tagar`;
            document.getElementById('mention-wajib-count').textContent = `${DB.mentions_wajib.length} Akun`;
            document.getElementById('hashtag-utama-count').textContent = `${DB.hashtags_utama.length} Tagar`;
            
            renderPlatforms();
            renderTones();
            renderTemplates();
            renderManualSelector();
            
            setInterval(updateCountdown, 1000);
            updateCountdown();
        }
        
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', e => {
            if ((e.ctrlKey || e.metaKey) && (e.key === 'c' || e.key === 'u' || e.key === 's')) {
                let el = e.target;
                while (el) {
                    if (el.tagName === 'BUTTON' && el.onclick && (el.onclick.toString().includes('copyTemplate') || el.onclick.toString().includes('copyTargets') || el.onclick.toString().includes('copyHashtags') || el.onclick.toString().includes('copyManualSelection'))) return; 
                    el = el.parentElement;
                }
                e.preventDefault();
                showToast("Konten dilindungi! Gunakan tombol 'Salin' yang tersedia.");
            }
        });
        
        window.onload = init;
    </script>
</body>
</html>
